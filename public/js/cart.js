"use strict";new Vue({watch:{ischeck:function(){var o=this;alert("222:"+o.checkall),o.pro_list.length===o.ischeck.length?o.checkall=!0:o.checkall=!1,o.choose_num=o.ischeck.length,o.caltotalpri()}},data:function(){return{min:!1,max:!1,showAlert:!1,msg:null,pro_list:[],ischeck:[],checkall:!1,choose_num:0,total_pri:0,like_list:[],callback:null}},mounted:function(){var o=this;o.loadPro(),o.show_like()},methods:{add:function(o){var t=this,c=parseInt(o.buyCount.toString().replace(/[^\d]/g,""));t.min&&(t.min=!1),c<o.stockCount&&(c+=1)===o.stockCount&&(t.max=!0),jAjax({type:"post",url:config.cart_add_url,data:{buy_number:c-o.buyCount,"product_id ":o.goodsId,spec_id:o.specId},timeOut:5e3,before:function(){console.log("before")},success:function(o){o&&(o=JSON.parse(o),200==parseInt(o.code)?console.log("ok"):console.log("false"))},error:function(o,t){console.log(t)}}),o.buyCount=c,t.caltotalpri()},minus:function(o){var t=this,c=parseInt(o.buyCount.toString().replace(/[^\d]/g,""));t.max&&(t.max=!1),c>0&&(c-=1,0===c&&(t.min=!0),jAjax({type:"post",url:config.cart_minus_url,data:{buy_number:c-o.buyCount,"product_id ":o.goodsId,spec_id:o.specId},timeOut:5e3,before:function(){console.log("before")},success:function(o){o&&(o=JSON.parse(o),200==parseInt(o.code)?console.log("ok"):console.log("false"))},error:function(o,t){console.log(t)}}),o.buyCount=c),t.caltotalpri()},selectedProduct:function(o){void 0===o.checked?this.$set(o,"checked",!0):o.checked=!o.checked,this.caltotalpri()},caltotalpri:function(){var o=this;o.total_pri=0,o.ischeck.forEach(function(t){o.total_pri+=parseFloat(t.promotionPrice)*parseFloat(t.buyCount)}),o.total_pri=o.total_pri.toFixed(2)},chooseall:function(){var o=this,t=[];o.checkall||o.pro_list.forEach(function(o){t.push(o)}),o.ischeck=t},close:function(){this.showAlert=!1},close_auto:function(o,t){var c=this;setTimeout(function(){c.showAlert=!1,o&&o(t)},1500)},show_like:function(){this.like_list=config.like_list},linkto:function(o){o&&(location.href="http://localhost:9000/login.html")},loadPro:function(){this.pro_list=config.carts},buy:function(){var o=this,t=[];o.ischeck.forEach(function(o){var c={};c.goodsId=o.goodsId,c.specId=o.specId,c.buyCount=o.buyCount,t.push(c)}),t.length>0&&(location.href=encodeURI(config.buy_url+"?product="+JSON.stringify(t)))},toFloat:function(o){return parseFloat(o).toFixed(2)},confirm:function(o,t){var c=this;c.msg="是否要移除该宝贝？",c.orderId=o,c.callback=t,c.showConfirm=!0},no:function(){this.showConfirm=!1},ok:function(o,t){this.showConfirm=!1,o&&o(t)}}}).$mount("#cart");