"use strict";Vue.component("pop",{template:"#pop",data:function(){return{positionY:0,timer:null}},props:["msg"],methods:{close:function(){this.$emit("close")}}}),new Vue({watch:{ischeck:function(){this.pro_list.length===this.ischeck.length?this.checkAll=!0:this.checkAll=!1,this.choose_num=this.ischeck.length,this.caltotalpri()},checkAll:function(o){this.checkAll=o}},data:function(){return{min:!1,max:!1,showAlert:!1,msg:null,pro_list:[],ischeck:[],checkAll:!1,choose_num:0,total_pri:0,like_list:[]}},mounted:function(){this.loadPro(),this.show_like()},methods:{add:function(o){var t=this,c=parseInt(o.buyCount.toString().replace(/[^\d]/g,""));t.min&&(t.min=!1),c<o.stockCount&&(c+=1)===o.stockCount&&(t.max=!0),jAjax({type:"post",url:config.cart_add_url,data:{buy_number:c-o.buyCount,"product_id ":o.goodsId,spec_id:o.specId},timeOut:5e3,before:function(){console.log("before")},success:function(o){o&&(o=JSON.parse(o),200==parseInt(o.code)?console.log("ok"):console.log("false"))},error:function(o,t){console.log(t)}}),o.buyCount=c,t.caltotalpri()},minus:function(o){var t=this,c=parseInt(o.buyCount.toString().replace(/[^\d]/g,""));t.max&&(t.max=!1),c>0&&(c-=1,0===c&&(t.min=!0),jAjax({type:"post",url:config.cart_minus_url,data:{buy_number:c-o.buyCount,"product_id ":o.goodsId,spec_id:o.specId},timeOut:5e3,before:function(){console.log("before")},success:function(o){o&&(o=JSON.parse(o),200==parseInt(o.code)?console.log("ok"):console.log("false"))},error:function(o,t){console.log(t)}}),o.buyCount=c),t.caltotalpri()},selectedProduct:function(o){void 0===o.checked?this.$set(o,"checked",!0):o.checked=!o.checked,this.caltotalpri()},caltotalpri:function(){var o=this;o.total_pri=0,o.ischeck.forEach(function(t){t.checked&&(o.total_pri+=parseFloat(t.promotionPrice)*parseFloat(t.buyCount))}),o.total_pri=o.total_pri.toFixed(2)},chooseall:function(){var o=this,t=this,c=[];t.checkAll||t.pro_list.forEach(function(o){c.push(o)}),t.choose_num=c.length,t.ischeck=c,t.pro_list.forEach(function(c){void 0===c.checked?o.$set(c,"checked",!t.checkAll):c.checked=!t.checkAll}),t.caltotalpri()},close:function(){this.showAlert=!1},close_auto:function(o,t){var c=this;setTimeout(function(){c.showAlert=!1,o&&o(t)},1500)},show_like:function(){this.like_list=config.like_list},linkto:function(o){o&&(location.href="http://localhost:9000/login.html")},loadPro:function(){this.pro_list=config.carts},buy:function(){var o=this,t=[];o.ischeck.forEach(function(o){var c={};c.goodsId=o.goodsId,c.specId=o.specId,c.buyCount=o.buyCount,t.push(c)}),t.length>0&&(location.href=encodeURI(config.buy_url+"?product="+base64.encode64(JSON.stringify(t))))}}}).$mount("#cart");