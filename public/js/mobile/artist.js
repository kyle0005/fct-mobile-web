"use strict";Vue.component("mVideo",{template:"#m_video",data:function(){return{isVideoLoad:!1}},mounted:function(){},props:{poster:{type:String,default:""},url:{type:String,default:""},id:{type:String,default:""}},methods:{loadVideo:function(){var t=this;t.isVideoLoad=!0,t.$nextTick(function(){var e=document.getElementById(t.id);e.play(),e.addEventListener("fullscreenchange",function(){console.log(document.fullscreen)},!1),e.addEventListener("mozfullscreenchange",function(){console.log(document.mozFullScreen)},!1),e.addEventListener("webkitfullscreenchange",function(){console.log(document.webkitIsFullScreen)},!1),e.addEventListener("msfullscreenchange",function(){console.log(document.msFullscreenElement)},!1)})}}}),Vue.component("live",{template:"#live",watch:{liveList:function(t,e){this.listloading||(this.liveList&&this.liveList.length>0?this.nodata=!1:this.nodata=!0)}},computed:{topImg:function(){var t=this,e=!1,i=[];return config.artist.dynamicList.entries.forEach(function(e,a){e.isTop?t.top=e:i.push(e)}),t.liveList=i,t.listloading=!1,t.top.images&&t.top.images.length>0&&(e=!0),e}},mounted:function(){},data:function(){return{dynamicList:config.artist.dynamicList,liveList:[],top:{},preventRepeatReuqest:!1,last_url:"",isVideoLoad:!1,listloading:!0,pagerloading:!1,isPage:!1,nodata:!1,isLastPage:!1}},methods:{getBefore:function(){var t=this;t.isPage?t.pagerloading=!0:t.listloading=!0},nextPage:function(){var t=this;if(t.preventRepeatReuqest=!0,t.dynamicList.pager.next>0){var e=config.artistPage_url+"?page="+t.dynamicList.pager.next;e!==t.last_url&&(t.last_url=e,t.isPage=!0,tools.ajaxGet(e,t.pageSucc,t.getBefore))}else t.isLastPage=!0},pageSucc:function(t){var e=this;e.dynamicList=t.data,e.liveList=e.liveList.concat(t.data.entries),e.loadLive(),e.preventRepeatReuqest=!1,e.listloading=!1,e.pagerloading=!1,e.isPage=!1},loadLive:function(){var t=this;t.liveList.forEach(function(e,i){if(e.isTop){var a=t.liveList;t.liveList=[],a.splice(i,1),t.liveList=a}})}}}),Vue.component("works",{template:"#works",mounted:function(){this.loadWorks()},watch:{workslist:function(t,e){this.listloading||(this.workslist&&this.workslist.length>0?this.nodata=!1:this.nodata=!0)}},data:function(){return{workslist:[],last_url:"",listloading:!0,pagerloading:!1,isPage:!1,nodata:!1}},methods:{getBefore:function(){this.listloading=!0},loadWorks:function(){var t=this,e=config.artistWorks_url;e!==t.last_url&&(t.last_url=e,tools.ajaxGet(e,t.workSucc,t.getBefore))},workSucc:function(t){var e=this;e.workslist=t.data,e.listloading=!1}}}),Vue.component("chat",{template:"#chat",computed:{},mounted:function(){this.loadChat()},watch:{chatlist:function(t,e){this.listloading||(this.chatlist&&this.chatlist.length>0?this.nodata=!1:this.nodata=!0)}},data:function(){return{chatlist:[],last_url:"",pager:{},open:!1,docked:!1,preventRepeatReuqest:!1,showAlert:!1,msg:null,message:"",listloading:!0,pagerloading:!1,isPage:!1,nodata:!1,isLastPage:!1}},methods:{getBefore:function(){var t=this;t.isPage?t.pagerloading=!0:t.listloading=!0},nextPage:function(){var t=this;if(t.preventRepeatReuqest=!0,t.pager.next>0){var e=config.artistChat_url+"?page="+t.pager.next;e!==t.last_url&&(t.last_url=e,t.isPage=!0,tools.ajaxGet(e,t.pageSucc,t.getBefore))}else t.isLastPage=!0},pageSucc:function(t){var e=this;e.pager=t.data.pager,e.chatlist=e.chatlist.concat(t.data.entries),e.preventRepeatReuqest=!1,e.listloading=!1,e.pagerloading=!1,e.isPage=!1},popchat:function(){var t=this;t.open?(t.open=!1,setTimeout(function(){t.docked=!1},300)):(t.docked=!0,t.open=!0)},send:function(){var t=this,e={message:t.message};t.$refs.subpost.post(config.chat_url,e)},postSuc:function(t,e){this.popchat()},postTip:function(t){var e=this;e.msg="留言提交成功，我们将通知“"+config.artist.name+"”给您回复，请留意！",e.showAlert=!0,e.close_auto()},postBefore:function(){},postError:function(){},loadChat:function(){var t=this,e=config.artistChat_url;e!==t.last_url&&(t.last_url=e,tools.ajaxGet(e,t.chatSucc,t.getBefore))},chatSucc:function(t){var e=this;e.chatlist=t.data.entries,e.pager=t.data.pager,e.listloading=!1},succhandle:function(t){var e=this;e.msg="留言提交成功，我们将通知“"+config.artist.name+"”给您回复，请留意！",e.showAlert=!0,t.url?e.close_auto(e.linkto,t.url):e.close_auto(),e.popchat()},close:function(){this.showAlert=!1},close_auto:function(t,e){var i=this;setTimeout(function(){i.showAlert=!1,t&&t(e)},1500)},linkto:function(t){t&&(location.href=t)}}});var app=new Vue({computed:{},mounted:function(){},activated:function(){},deactivated:function(){},data:{haslive:!1,currentView:"live",tabs:["实时动态","相关作品","对话艺人"],tab_num:0,artist:config.artist,collected:config.artist.favoriteState},watch:{},methods:{collection:function(){var t=this;tools.ajaxPost(config.fav_url,{},t.favSuc,t.postBefore,t.postError,{},t.postTip)},favSuc:function(t){this.collected=t.data.favoriteState},postSuc:function(t){},postTip:function(t){var e=this;e.msg=t.message,e.showAlert=!0,e.close_auto()},postBefore:function(){},postError:function(){},close:function(){this.showAlert=!1},close_auto:function(t,e){var i=this;setTimeout(function(){i.showAlert=!1,t&&t(e)},1500)},linkTo:function(t){var e=this;switch(this.tab_num=t,parseInt(t)){case 0:e.currentView="live";break;case 1:e.currentView="works";break;case 2:e.currentView="chat";break;default:e.currentView="live"}}},components:{}}).$mount("#artist");