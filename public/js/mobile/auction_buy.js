"use strict";var app=new Vue({computed:{addressStr:function(){return this.address.province+this.address.cityId+this.address.townId+this.address.address}},mounted:function(){var t=this;t.product=config.product,t.loadAddress(),t.calTotal(),t.calculateAmount(0)},data:{showAlert:!1,msg:null,product:{},address:{},hasAddress:!1,remark:"",has_terms:config.has_terms,totalPrice:0,points:config.points,usedPoint:0,usePoint:!1,accountAmount:config.amount,usedAccountAmount:0,useAccountAmount:!1},watch:{},methods:{loadAddress:function(){var t=this;t.address=config.address,void 0!==t.address.id?t.hasAddress=!0:t.hasAddress=!1},calTotal:function(){var t=this,o=0;o=parseFloat(t.product.bidPrice)-parseFloat(t.product.deposit),t.totalPrice=o.toFixed(2)},toFloat:function(t){return parseFloat(t).toFixed(2)},pay:function(){var t=this,o=config.pay_url,s={};t.has_terms?(s={points:t.usedPoint,account_amount:t.usedAccountAmount,remark:t.remark,address_id:t.address.id,has_terms:t.has_terms,signup_id:config.signup_id},t.$refs.paypost.post(o,s)):(t.msg="请同意并钩选《方寸堂服务协议》",t.showAlert=!0,t.close_auto())},postSuc:function(t,o){},postTip:function(t){var o=this;o.msg=t.message,o.showAlert=!0,o.close_auto()},postBefore:function(){},postError:function(){},calculateAmount:function(t){var o=this;o.calTotal(),o.points=config.points,o.accountAmount=config.accountAmount,1==t?o.usePoint=!o.usePoint:2==t&&(o.useAccountAmount=!o.useAccountAmount),o.usedPoint=0,o.usedAccountAmount=0,o.points>0&&o.usePoint&&(o.points/100>o.totalPrice?(o.usedPoint=100*o.totalPrice,o.totalPrice=0):(o.totalPrice=o.totalPrice-o.points/100,o.usedPoint=o.points)),o.totalPrice>0&&o.accountAmount>0&&o.useAccountAmount&&(o.accountAmount>o.totalPrice?(o.usedAccountAmount=o.totalPrice,o.totalPrice=0):(o.totalPrice=o.totalPrice-o.accountAmount,o.usedAccountAmount=o.accountAmount))},payhandle:function(t){var o=this;o.msg=t.message,o.showAlert=!0,t.url?o.close_auto(o.linkto,t.url):o.close_auto()},succhandle:function(t){var o=this;o.calculateAmount(0),t.url?o.close_auto(o.linkto,t.url):o.close_auto()},close:function(){this.showAlert=!1},close_auto:function(t,o){var s=this;setTimeout(function(){s.showAlert=!1,t&&t(o)},1500)},linkto:function(t){t&&(location.href=t)}}}).$mount("#buy");