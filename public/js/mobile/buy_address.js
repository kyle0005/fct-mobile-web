"use strict";var app=new Vue({mounted:function(){var t=this;t.initdata(),t.defaultAddr()},watch:{address:function(t,e){this.listloading||(this.address&&this.address.length>0?this.nodata=!1:this.nodata=!0)}},data:{address:[],showAlert:!1,msg:null,picked:"",subText:"删除",del_index:null,listloading:!0,nodata:!1},methods:{initdata:function(){var t=this;t.address=config.address,t.listloading=!1},setDefault:function(t){this.address.forEach(function(t,e){t.isDefault=0}),t.isDefault=1},changeDefault:function(t){var e=this;jAjax({type:"post",url:config.defaultAddrUrl+"?id="+t.id,data:{},timeOut:5e3,before:function(){},success:function(s){s&&(s=JSON.parse(s),200==parseInt(s.code)?(e.msg=s.message,e.showAlert=!0,e.close_auto(),e.setDefault(t),e.defaultAddr()):(e.msg=s.message,e.showAlert=!0,e.close_auto()))},error:function(t,e){}})},edit:function(t){location.href=config.editUrl+"?id="+t.id},del:function(t){var e=this,s=config.delAddrUrl+"?id="+t.item.id,d={};e.del_index=t.index;var i="subpost"+t.index;e.$refs[i][0].post(s,d)},addressStr:function(t){return t.province+t.cityId+t.townId+t.address},defaultAddr:function(){var t=this,e=0,s="";t.address.forEach(function(d){1==(e=parseInt(d.isDefault))&&(s=t.addressStr(d))}),t.picked=s},succhandle:function(t){var e=this;e.msg=t.message,e.showAlert=!0,404!=parseInt(t.code)&&(e.address.splice(e.del_index,1),e.setDefault(e.address[0]),e.defaultAddr(),t.url?e.close_auto(e.linkto,t.url):e.close_auto())},close:function(){this.showAlert=!1},close_auto:function(t,e){var s=this;setTimeout(function(){s.showAlert=!1,t&&t(e)},1500)},linkto:function(t){t&&(location.href=t)}}}).$mount("#buy_address");