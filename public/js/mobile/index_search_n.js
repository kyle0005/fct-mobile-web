"use strict";var app=new Vue({mounted:function(){var e=this;e.initData(),window.addEventListener("scroll",function(){e.showTop=tools.getScrollTop()>=tools.getWindowHeight()},!1)},data:{open:!1,docked:!1,showPop:0,sorts:config.search.sorts,artists:config.search.artists,priceSorts:config.search.priceSorts,volumes:config.search.volumes,categorys:config.search.categorys,lowpri:0,highpri:0,priV:null,lowvol:0,highvol:0,showTop:!1,search:config.search.keyword||"",result:[],pager:config.result.pager,_url:"",sorts_code:0,artists_code:0,cate_code:"",pri_tab:0,vol_tab:0,preventRepeatReuqest:!1,last_url:"",listloading:!0,pagerloading:!1,isPage:!1,nodata:!1,showAlert:!1,msg:null},watch:{result:function(e,t){this.listloading||(this.result&&this.result.length>0?this.nodata=!1:this.nodata=!0)}},methods:{toggle:function(e){var t=this;e!==t.showPop&&(t.open=!1,t.docked=!1,t.showPop=e),t.$nextTick(function(){setTimeout(function(){t.docked=!t.docked,t.open=!t.open},50)})},changeS:function(e,t,o){var r=this;0!==e&&(r.sorts_code=e),0!==t&&(r.artists_code=t),""!==o&&(r.cate_code=o);var a=r._url+"&sort="+(r.priV|r.sorts_code)+"&price_min="+r.lowpri+"&price_max="+r.highpri+"&author="+r.artists_code+"&volume_min="+r.lowvol+"&volume_max="+r.highvol+"&category_id="+r.cate_code;console.log(a),tools.ajaxGet(a,r.searchSuc,r.getBefore)},changeSorts:function(e){var t=this;t._url+="&sort="+e,tools.ajaxGet(t._url,t.searchSuc,t.getBefore)},changeArtists:function(e){var t=this;t._url+="&author="+e,tools.ajaxGet(t._url,t.searchSuc,t.getBefore)},priceSortsV:function(e,t){var o=this;o.priV=e.value,o.pri_tab=t},changePriceSorts:function(){var e=this;e._url+="&sort="+e.priV+"&price_min="+e.lowpri+"&price_max"+e.highpri,tools.ajaxGet(e._url,e.searchSuc,e.getBefore)},volumesV:function(e,t){var o=this;o.lowvol=e.min,o.highvol=e.max,o.vol_tab=t},changeVolumes:function(){var e=this;e._url+="&volume_min="+e.lowvol+"&volume_max"+e.highvol,tools.ajaxGet(e._url,e.searchSuc,e.getBefore)},changeCate:function(e){var t=this;t._url+="&category_id="+e,tools.ajaxGet(t._url,t.searchSuc,t.getBefore)},initData:function(){var e=this;e._url=config.url+"?keyword="+e.search,e.result=config.result.entries,e.pager=config.result.pager,e.listloading=!1},nextPage:function(){var e=this;if(e.preventRepeatReuqest=!0,e.pager.next>0){var t=e._url+"&sort="+(e.priV|e.sorts_code)+"&price_min="+e.lowpri+"&price_max="+e.highpri+"&author="+e.artists_code+"&volume_min="+e.lowvol+"&volume_max="+e.highvol+"&category_id="+e.cate_code+"&page="+e.pager.next;t!==e.last_url&&(e.last_url=t,e.isPage=!0,tools.ajaxGet(t,e.nextSucc,e.getBefore))}},nextSucc:function(e){var t=this;t.pager=e.data.pager,t.result=t.result.concat(e.data.entries),t.preventRepeatReuqest=!1,t.listloading=!1,t.pagerloading=!1,t.isPage=!1},getBefore:function(){var e=this;e.isPage?e.pagerloading=!0:e.listloading=!0},subSearch:function(){var e=this;e.nodata=!1,e.search&&""!==e.search&&(e._url=config.url+"?keyword="+e.search,tools.ajaxGet(e._url,e.searchSuc,e.getBefore))},searchSuc:function(e){var t=this;t.result=[],t.pager=e.data.pager,t.result=e.data.entries,t.listloading=!1,t.toggle(-1)},end:function(){console.log("end")},top:function(){tools.animate(document,{scrollTop:"0"},400,"ease-out")}}}).$mount("#isearch");