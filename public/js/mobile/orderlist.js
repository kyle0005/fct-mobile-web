"use strict";var app=new Vue({mounted:function(){var t=this;t.tab_num=config.status,t.initData()},watch:{orderlist:function(t,e){this.listloading||(this.orderlist&&this.orderlist.length>0?this.nodata=!1:this.nodata=!0)}},data:{showAlert:!1,msg:null,showConfirm:!1,show_search:!1,placeholder:"",keywords:"",orderlist:[],tabs:["全部","待付款","待发货","待收货","待评价"],tab_num:0,preventRepeatReuqest:!1,last_url:"",pager:config.orderlist.pager,status:config.status||-1,order_obj:{},orderId:null,callback:null,listloading:!0,pagerloading:!1,isPage:!1,nodata:!1,isLastPage:!1},methods:{initData:function(){var t=this;t.orderlist=config.orderlist.entries,t.listloading=!1},getBefore:function(){var t=this;t.isPage?t.pagerloading=!0:t.listloading=!0},cancel:function(t){var e=this,o=config.cancel_url+"/"+t.orderId+"/cancel",a={},r="closesref"+t.index;e.$refs[r][0].post(o,a,{})},postSuc:function(t){},postTip:function(t){var e=this;e.msg=t.message,e.showAlert=!0,e.close_auto()},postBefore:function(){},postError:function(){},todetail:function(t){location.href=config.detail_url+"/"+t.orderId},nextPage:function(){var t=this;if(t.preventRepeatReuqest=!0,t.pager.next>0){var e=config.orderlist_url+"?status="+t.status+"&page="+t.pager.next;e!==t.last_url&&(t.last_url=e,t.isPage=!0,tools.ajaxGet(e,t.nextSucc,t.getBefore))}else t.isLastPage=!0},category:function(t){var e=this;e.preventRepeatReuqest=!1,e.tab_num=t,e.orderlist={},e.nodata=!1,e.pager={},e.status=t;var o=config.orderlist_url+"?status="+e.status;3==t&&(o+="&comment_status=0"),tools.ajaxGet(o,e.cateSucc,e.getBefore)},subSearch:function(){var t=this;tools.ajaxGet(config.search_url+"?keyword="+t.keywords,t.searchSucc,t.getBefore)},search:function(t){var e=this;e.show_search?(e.placeholder="",1==t&&(e.subSearch(),e.keywords="")):e.placeholder="请输入订单号或者商品名称",e.show_search=!e.show_search},confirm:function(t,e){var o=this;o.msg="您确认要执行此操作？",o.order_obj={orderId:t.o.orderId,index:t.i},o.orderId=t.o.orderId,o.callback=e,o.showConfirm=!0},no:function(){this.showConfirm=!1},ok:function(t,e){this.showConfirm=!1,t&&t(e)},searchSucc:function(t){var e=this;e.orderlist=t.data.entries,e.pager=t.data.pager,e.listloading=!1},cateSucc:function(t){var e=this;e.orderlist=t.data.entries,e.pager=t.data.pager,e.listloading=!1},nextSucc:function(t){var e=this;e.pager=t.data.pager,e.orderlist=e.orderlist.concat(t.data.entries),e.preventRepeatReuqest=!1,e.listloading=!1,e.pagerloading=!1,e.isPage=!1},succhandle:function(t){var e=this;e.msg=t.message,e.showAlert=!0,t.url?e.close_auto(e.linkto,t.url):e.close_auto()},close:function(){this.showAlert=!1},close_auto:function(t,e){var o=this;setTimeout(function(){o.showAlert=!1,t&&t(e)},1500)},linkto:function(t){t&&(location.href=t)}}}).$mount("#orderlist");