"use strict";Vue.component("overview",{template:"#overview",mounted:function(){var t=this;t.loadoverview(),t.loadVideo()},computed:{calstock:function(){var t=this,e=0;return t.product.stockCount>0&&(e="有货"),e}},data:function(){return{product:{}}},methods:{loadVideo:function(){var t=this,e={fluid:!0,aspectRatio:"2:1",preload:"auto",poster:t.product.video.poster};videojs("my-player",e,function(){this.src(t.product.video.url),videojs.log("Your player is ready!"),this.play(),this.on("ended",function(){videojs.log("Awww...over so soon?!")})})},loadoverview:function(){this.product=config.product}}}),Vue.component("artist",{template:"#artist",mounted:function(){this.loadart()},data:function(){return{artist:[],artistsingle:{},titleshow:!1,chosen:!1,art_num:0}},methods:{loadsingle:function(t){var e=this;e.art_num=t,e.artistsingle=e.artist[t]},loadart:function(){var t=this;jAjax({type:"get",url:config.artist_url,timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)&&(t.artist=e.data,t.titleshow=t.artist.length>1,t.loadsingle(0)))},error:function(){console.log("error")}})}}}),Vue.component("pug",{template:"#pug",mounted:function(){this.loadpug()},data:function(){return{pugs:[],pugsingle:{},titleshow:!1,chosen:!1,pug_num:0}},methods:{loadsingle:function(t){var e=this;e.pug_num=t,e.pugsingle=e.pugs[t]},loadpug:function(){var t=this;jAjax({type:"get",url:config.pug_url,timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)&&(t.pugs=e.data,t.titleshow=t.pugs.length>1,t.loadsingle(0)))},error:function(){console.log("error")}})}}}),Vue.component("service",{template:"#service",mounted:function(){},data:function(){return{tab_service:config.tab_service}}}),Vue.component("discuss",{template:"#discuss",mounted:function(){this.loadList()},data:function(){return{commentlist:[]}},methods:{c_star:function(t){return 5-t},loadList:function(){var t=this;jAjax({type:"get",url:config.discuss_url,timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)&&(t.commentlist=e.data))},error:function(){console.log("error")}})}}}),Vue.component("pop",{template:"#pop",computed:{},mounted:function(){},watch:{},activated:function(){},deactivated:function(){},data:function(){return{positionY:0,timer:null}},props:["msg"],methods:{close:function(){this.$emit("close")}}});var app=new Vue({data:{product:config.product,ranks_list:[],pro_list:[],loading:!1,refreshing:!1,img_url:"public/images",currentView:"overview",tabs:["概览","艺人","泥料","售后保障","评论"],tab_num:0,showAlert:!1,msg:null,open:!1,docked:!1,chosen:!1,input_val:1,specs_single:[],specs_num:0,min:!1,max:!1,collected:config.product.favoriteState,numsshow:!1,isbuy:!1},mounted:function(){this.loadcart()},computed:{calstock:function(){var t=this,e=0;return t.product.specification.length<=0?t.product.stockCount>0&&(e="有货"):t.specs_single.stockCount>0&&(e="有货"),e},showprice:function(){var t=this;return t.product.specification.length<=0?t.product.salePrice:t.specs_single.salePrice}},methods:{loadcart:function(){var t=this,e=t.product.cartProductCount;t.numsshow=e>0},top:function(){tools.animate(document.body,{scrollTop:"0"},400,"ease-out")},collection:function(){var t=this;jAjax({type:"post",url:config.fav_url,timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)&&(t.collected=e.data.favoriteState,t.collected,t.showAlert=!0,t.msg=e.message,t.close_auto()))},error:function(){console.log("error")}})},close:function(){this.showAlert=!1},close_auto:function(t,e){var o=this;setTimeout(function(){o.showAlert=!1,t&&t(e)},1500)},linkTo:function(t){var e=this;switch(e.tab_num=t,parseInt(t)){case 0:e.currentView="overview";break;case 1:e.currentView="artist";break;case 2:e.currentView="pug";break;case 3:e.currentView="service";break;case 4:e.currentView="discuss";break;default:e.currentView="overview"}},change:function(t){},add:function(){var t=this,e=parseInt(t.input_val.toString().replace(/[^\d]/g,"")),o=0;o=t.product.specification.length<=0?t.product.stockCount:t.specs_single.stockCount,t.min&&(t.min=!1),e<o&&(e+=1)===o&&(t.max=!0),t.input_val=e},minus:function(){var t=this,e=parseInt(t.input_val.toString().replace(/[^\d]/g,""));t.max&&(t.max=!1),e>0&&(e-=1,0===e&&(t.min=!0),t.input_val=e)},footLinkTo:function(t){var e=this;e.specs_num=t,e.specs_single=e.product.specification[t],e.input_val=1,e.min=!1,e.max=!1},prevent:function(t){t.preventDefault(),t.stopPropagation()},choose:function(t){var e=this;e.open?(e.open=!1,setTimeout(function(){e.docked=!1},300)):(e.docked=!0,e.open=!0),0==parseInt(t)&&(e.isbuy=!1),1==parseInt(t)&&(e.isbuy=!0)},chooseSpec:function(){var t=this;t.chosen?t.chosen=!1:t.chosen=!0},buy:function(){var t=this;if(t.isbuy){var e=config.buy_url+"?product_id="+t.product.id;t.specs_single.length>0&&(e+="&spec_id="+t.specs_single.id),e+="&buy_number="+t.input_val,location.href=e}else jAjax({type:"post",url:config.addcart_url,data:formData.serializeForm("addcart"),timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)?(t.cart_num=e.data.cartProductCount,t.msg=e.message,t.showAlert=!0,t.close_auto(t.choose)):(t.msg=e.message,t.showAlert=!0,t.close_auto()))},error:function(t,e){console.log(e)}})}},components:{}}).$mount("#detail");