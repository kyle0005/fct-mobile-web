"use strict";Vue.component("pop",{template:"#pop",data:function(){return{positionY:0,timer:null}},props:["msg"],methods:{close:function(){this.$emit("close")}}}),Vue.component("star",{template:"#m_star",data:function(){return{stars_num:5,stars_msg:["非常差","很差","一般","很好","非常好"],stars_chosen_msg:"",stars_chosen:0}},mounted:function(){},methods:{c_star:function(t){var e=this;e.stars_chosen=t+1,e.stars_chosen_msg=e.stars_msg[e.stars_chosen-1]}}}),Vue.component("m-textarea",{template:"#m_textarea",data:function(){return{content:""}},mounted:function(){},methods:{}}),Vue.component("upload",{template:"#m_upload",data:function(){return{uploadItem:[],subUpload:[],maxNum:5}},mounted:function(){},methods:{delImg:function(t){var e=this;e.uploadItem.splice(t,1),e.subUpload.splice(t,1)},fileChange:function(t){var e=this,o={};o=void 0===t.target?t[0]:t.target.files[0];var s=new FormData;s.append("action","head"),s.append("file",o),jAjax({type:"post",url:config.uploadFileUrl,data:s,contentType:!1,timeOut:6e4,success:function(t){t&&(t=JSON.parse(t),200==parseInt(t.code)&&(e.uploadItem.push(t.data.fullUrl),e.subUpload.push(t.data.url)))}})}}});var app=new Vue({mounted:function(){},data:{showAlert:!1,msg:null,order_detail:config.order_detail,anonymous:!1,is_break:!1},watch:{},methods:{sub:function(){var t=this,e=[];t.order_detail.orderGoods.forEach(function(o,s){var n=t.$refs.star[s],a=t.$refs.text[s],r=t.$refs.uploadimg[s],u={};u.goodsId=o.goodsId,u.content=a.content,u.descScore=n.stars_chosen,u.picture=r.subUpload,e.push(u)}),t.is_break||jAjax({type:"post",url:config.commentUrl,data:{order_id:t.order_detail.orderId,express_score:t.$refs.express.stars_chosen,sale_score:t.$refs.sale.stars_chosen,has_anonymous:t.anonymous,products:JSON.stringify(e)},timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),parseInt(e.code),t.msg=e.message,t.showAlert=!0,t.close_auto())},error:function(t,e){console.log(e)}})},close:function(){this.showAlert=!1},close_auto:function(t,e){var o=this;setTimeout(function(){o.showAlert=!1,t&&t(e)},1500)},linkto:function(t){t&&(location.href=t)}}}).$mount("#ordercomment");