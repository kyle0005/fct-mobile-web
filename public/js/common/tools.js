"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(e,o){var i;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,s=r.length;c<s;c++)a[r[c]]=function(t,e){return function(){return t.apply(e,arguments)}}(a[r[c]],a);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),"function"==typeof e.onclick&&(i=e.onclick,e.addEventListener("click",function(t){i(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,c,s,l,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(l=t.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(c=u.tagName.toLowerCase())){if(e=this.findControl(u)){if(this.focus(u),n)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),o&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return!(!o||i||!(s=u.fastClickScrollParent)||s.fastClickLastScrollTop===s.scrollTop)||(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i;if(void 0===window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"===_typeof(define.amd)&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();var tools={animate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ease-out",i=arguments[4];clearInterval(t.timer),n instanceof Function?(i=n,n=400):n instanceof String&&(o=n,n=400),o instanceof Function&&(i=o,o="ease-out");var r=function(e){return"opacity"===e?Math.round(100*tools.getStyle(t,e,"float")):tools.getStyle(t,e)},a=parseFloat(document.documentElement.style.fontSize),c={},s={};Object.keys(e).forEach(function(t){/[^\d^\.]+/gi.test(e[t])?c[t]=e[t].match(/[^\d^\.]+/gi)[0]||"px":c[t]="px",s[t]=r(t)}),Object.keys(e).forEach(function(t){"rem"==c[t]?e[t]=Math.ceil(parseInt(e[t])*a):e[t]=parseInt(e[t])});var l=!0,u={};t.timer=setInterval(function(){Object.keys(e).forEach(function(a){var c,d=0,h=!1,f=r(a)||0,p=0;switch(o){case"ease-out":p=f,c=5*n/400;break;case"linear":p=s[a],c=20*n/400;break;case"ease-in":d=(u[a]||0)+(e[a]-s[a])/n,u[a]=d;break;default:p=f,c=5*n/400}switch("ease-in"!==o&&(d=(e[a]-p)/c,d=d>0?Math.ceil(d):Math.floor(d)),o){case"ease-out":h=f!=e[a];break;case"linear":case"ease-in":h=Math.abs(Math.abs(f)-Math.abs(e[a]))>Math.abs(d);break;default:h=f!=e[a]}h?(l=!1,"opacity"===a?(t.style.filter="alpha(opacity:"+(f+d)+")",t.style.opacity=(f+d)/100):"scrollTop"===a?t.scrollTop=f+d:t.style[a]=f+d+"px"):l=!0,l&&(clearInterval(t.timer),i&&i())})},20)},showBack:function(t){var e,n;document.addEventListener("scroll",function(){i()},!1),document.addEventListener("touchstart",function(){i()},{passive:!0}),document.addEventListener("touchmove",function(){i()},{passive:!0}),document.addEventListener("touchend",function(){n=document.body.scrollTop,o()},{passive:!0});var o=function t(){e=requestAnimationFrame(function(){document.body.scrollTop!=n?(n=document.body.scrollTop,t()):cancelAnimationFrame(e),i()})},i=function(){t(document.body.scrollTop>500?!0:!1)}},loadMore:function(t,e){var n,o,i,r,a,c,s=window.screen.height;document.body.addEventListener("scroll",function(){u()},!1),t.addEventListener("touchstart",function(){n=t.offsetHeight,o=t.offsetTop,i=tools.getStyle(t,"paddingBottom"),r=tools.getStyle(t,"marginBottom")},{passive:!0}),t.addEventListener("touchmove",function(){u()},{passive:!0}),t.addEventListener("touchend",function(){c=document.body.scrollTop,l()},{passive:!0});var l=function e(){a=requestAnimationFrame(function(){document.body.scrollTop!=c?(c=document.body.scrollTop,u(),e()):(cancelAnimationFrame(a),n=t.offsetHeight,u())})},u=function(){document.body.scrollTop+s>=n+o+i+r&&e()}},getStyle:function(t,e){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"int";return n="scrollTop"===e?t.scrollTop:t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null)[e],"float"==o?parseFloat(n):parseInt(n)},getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}};Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=n.length;return function(i){if("object"!==(void 0===i?"undefined":_typeof(i))&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var r=[];for(var a in i)t.call(i,a)&&r.push(a);if(e)for(var c=0;c<o;c++)t.call(i,n[c])&&r.push(n[c]);return r}}());var _util={debounce:function(t,e){var n=this,o=arguments,i=void 0;return function(){clearTimeout(i),i=setTimeout(function(){t.apply(n,o)},e)}},getPicInfo:function(t){var e=t.src||"",n=t.fastCallback,o=t.loadedCallback,i=t.errorCallback,r=new Image,a={isError:!1,width:0,height:0},c=function(){(a.isError||r.width>0||r.height>0)&&(clearInterval(s),a.width=r.width,a.height=r.height,n&&n(a))},s=void 0;r.src=e,r.addEventListener("error",function(t){a.isError=!0,i&&i(a)},!1),r.complete?(a.width=r.width,a.height=r.height,n&&n(a),o&&o(a)):(r.addEventListener("load",function(){a.width=r.width,a.height=r.height,o&&o(a)},!1),s=setInterval(c,50))}},VueViewload=function(){function t(e){_classCallCheck(this,t),this.emptyPic="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",this.defaultPic=e&&e.defaultPic||this.emptyPic,this.errorPic=e&&e.errorPic||this.emptyPic,this.container=e&&e.container||window,this.threshold=e&&parseInt(e.threshold,10)||0,this.effectFadeIn=e&&e.effectFadeIn||!1,this.callback=e&&e.callback||new Function,this.selector=e&&e.selector||[],this.event=["scroll","resize"],this.status=["loading","loaded","error"],this.delayRender=_util.debounce(this.render.bind(this),200)}return _createClass(t,[{key:"inView",value:function(t){var e=!1,n=t.getBoundingClientRect(),o=this.container==window?{left:0,top:0}:this.container.getBoundingClientRect(),i=this.container==window?window.innerWidth:this.container.clientWidth,r=this.container==window?window.innerHeight:this.container.clientHeight;return n.bottom>this.threshold+o.top&&n.top+this.threshold<r+o.top&&n.right>this.threshold+o.left&&n.left+this.threshold<i+o.left&&(e=!0),e}},{key:"bindUI",value:function(){var t=this;this.event.forEach(function(e,n){t.container.addEventListener(e,t.delayRender,!1),t.container!==window&&"resize"==e&&window.addEventListener(e,t.delayRender,!1)})}},{key:"unbindUI",value:function(){var t=this;this.event.forEach(function(e,n){t.container.removeEventListener(e,t.delayRender,!1),t.container!==window&&"resize"==e&&window.removeEventListener(e,t.delayRender,!1)})}},{key:"render",value:function(){var t=this;this.isLoadEvent||(this.isLoadEvent=!0,this.bindUI()),this.selector.length||this.unbindUI();for(var e=0;e<this.selector.length;e++){(function(n){var o=t.selector[n],i=o.ele.nodeName.toLowerCase();if("none"==getComputedStyle(o.ele,null).display)return t.selector.splice(n--,1),"continue";"img"==i&&(o.ele.getAttribute("data-src")||(o.ele.setAttribute("data-src",o.src),o.ele.setAttribute("data-status",t.status[0])),o.ele.getAttribute("src")||o.ele.setAttribute("src",t.defaultPic)),t.inView(o.ele)&&("img"==i?(_util.getPicInfo({src:o.src,errorCallback:function(e){o.ele.src=t.errorPic,o.ele.setAttribute("data-status",t.status[2])},loadedCallback:function(e){t.effectFadeIn&&(o.ele.style.opacity=0),o.ele.src=e.isError?t.errorPic:o.src,o.ele.removeAttribute("data-src"),o.ele.setAttribute("data-status",t.status[1]),setTimeout(function(){o.ele.style.opacity=1,o.ele.style.transition="all 1s"},50)}}),t.callback(o.ele,o.src)):"function"==typeof o.src&&o.src.call(o.ele),t.selector.splice(n--,1)),e=n})(e)}}}]),t}();Vue.directive("view",{bind:function(t,e){var n={},o={},i=void 0,r=void 0==e.arg?"window":e.arg;void 0==n[r]&&(n[r]=[]),n[r].push({ele:t,src:e.value}),Vue.nextTick(function(){void 0===i&&(i=_util.debounce(function(){for(var t in n)o.container="window"==t?window:document.getElementById(t),o.selector=n[t],new VueViewload(o).render()},200)),i()})}});var pop_html='<div class="alet_container"><section class="tip_text_container"><div class="tip_text">{{ msg }}</div></section></div>';Vue.component("pop",{template:pop_html,data:function(){return{positionY:0,timer:null}},props:["msg"],methods:{close:function(){this.$emit("close")}}});var confirm_html='<div class="confirm-container"><section class="inner"><div class="confirm-text">{{ msg }}</div><div class="confirm-btn"><a href="javascript:;" class="cancel" @click="no()">取消</a><a href="javascript:;" class="ok" @click="ok()">确定</a></div></section></div>';Vue.component("confirm",{template:confirm_html,data:function(){return{positionY:0,timer:null}},props:["msg","callback","obj"],methods:{no:function(){this.$emit("no")},ok:function(){this.$emit("ok",this.callback,this.obj)}}});