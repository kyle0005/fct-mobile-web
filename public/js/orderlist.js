"use strict";var app=new Vue({mounted:function(){},directives:{"load-more":{bind:function(e,o){var t=window.screen.height,r=void 0,n=void 0,s=void 0,a=void 0,c=void 0,i=void 0,l=void 0,u=void 0,d=e.attributes.type&&e.attributes.type.value;2==d?(l=e,u=e.children[0]):(l=document.body,u=e),e.addEventListener("touchstart",function(){r=u.clientHeight,2==d&&(r=r),n=e.offsetTop,s=tools.getStyle(e,"paddingBottom"),a=tools.getStyle(e,"marginBottom")},!1),e.addEventListener("touchmove",function(){g()},!1),e.addEventListener("touchend",function(){i=l.scrollTop,f()},!1);var f=function e(){c=requestAnimationFrame(function(){l.scrollTop!=i?(i=l.scrollTop,e()):(cancelAnimationFrame(c),r=u.clientHeight,g())})},g=function(){l.scrollTop+t>=r+n+s+a-2&&o.value()}}}},data:{showAlert:!1,msg:null,showConfirm:!1,show_search:!1,placeholder:"",keywords:"",orderlist:config.orderlist.entries,tabs:["全部","待付款","待发货","待收货","待评价"],tab_num:0,preventRepeatReuqest:!1,last_url:"",pager:config.orderlist.pager,status:"",orderId:null,callback:null},watch:{},methods:{cancel:function(e){var o=this;jAjax({type:"post",url:config.cancel_url+"/"+e+"/cancel",data:{},timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)?(o.msg=e.message,o.showAlert=!0,e.url?o.close_auto(o.linkto,e.url):o.close_auto()):(o.msg=e.message,o.showAlert=!0,o.close_auto()))},error:function(){console.log("error")}})},todetail:function(e){location.href=config.detail_url+"/"+e.orderId},nextPage:function(){var e=this;if(e.preventRepeatReuqest=!0,e.pager.next>0){var o=config.orderlist_url+"?status="+e.status+"&page="+e.pager.next;o!==e.last_url&&(e.last_url=o,jAjax({type:"get",url:o,timeOut:5e3,before:function(){console.log("before")},success:function(o){o&&(o=JSON.parse(o),200==parseInt(o.code)?(e.pager=o.data.pager,e.orderlist=o.data.entries.concat(e.orderlist),e.preventRepeatReuqest=!1):console.log("false"))},error:function(){console.log("error")}}))}},category:function(e){var o=this;o.preventRepeatReuqest=!1,o.tab_num=e,o.status=0==e?"":e-1;var t=config.orderlist_url+"?status="+o.status;jAjax({type:"get",url:t,timeOut:5e3,before:function(){console.log("before")},success:function(e){e&&(e=JSON.parse(e),200==parseInt(e.code)?(o.orderlist=e.data.entries,o.pager=e.data.pager):console.log("false"))},error:function(){console.log("error")}})},subSearch:function(){var e=this;jAjax({type:"get",url:config.search_url+"?keyword="+e.keywords,data:{},timeOut:5e3,before:function(){console.log("before")},success:function(o){o&&(o=JSON.parse(o),200==parseInt(o.code)?(e.orderlist=o.data.entries,e.pager=o.data.pager):(e.msg=o.message,e.showAlert=!0,e.close_auto()))},error:function(){console.log("error")}})},close:function(){this.showAlert=!1},close_auto:function(e,o){var t=this;setTimeout(function(){t.showAlert=!1,e&&e(o)},1500)},linkto:function(e){e&&(location.href=e)},search:function(e){var o=this;o.show_search?(o.placeholder="",1==e&&(o.subSearch(),o.keywords="")):o.placeholder="请输入订单号或者商品名称",o.show_search=!o.show_search},confirm:function(e,o){var t=this;t.msg="您确认要执行此操作？",t.orderId=e,t.callback=o,t.showConfirm=!0},no:function(){this.showConfirm=!1},ok:function(e,o){this.showConfirm=!1,e&&e(o)}}}).$mount("#orderlist");