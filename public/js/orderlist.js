"use strict";var app=new Vue({mounted:function(){this.tab_num=config.status},directives:{"load-more":{bind:function(t,e){var o=window.screen.height,a=void 0,n=void 0,r=void 0,s=void 0,i=void 0,c=void 0,l=void 0,u=void 0,d=t.attributes.type&&t.attributes.type.value;2==d?(l=t,u=t.children[0]):(l=document.body,u=t),t.addEventListener("touchstart",function(){a=u.clientHeight,2==d&&(a=a),n=t.offsetTop,r=tools.getStyle(t,"paddingBottom"),s=tools.getStyle(t,"marginBottom")},!1),t.addEventListener("touchmove",function(){f()},!1),t.addEventListener("touchend",function(){c=l.scrollTop,h()},!1);var h=function t(){i=requestAnimationFrame(function(){l.scrollTop!=c?(c=l.scrollTop,t()):(cancelAnimationFrame(i),a=u.clientHeight,f())})},f=function(){l.scrollTop+o>=a+n+r+s-2&&e.value()}}}},data:{showAlert:!1,msg:null,showConfirm:!1,show_search:!1,placeholder:"",keywords:"",orderlist:config.orderlist.entries,tabs:["全部","待付款","待发货","待收货","待评价"],tab_num:0,preventRepeatReuqest:!1,last_url:"",pager:config.orderlist.pager,status:config.status||-1,orderId:null,callback:null,subText:"取消",listloading:!1,nodata:!1},methods:{getBefore:function(){this.listloading=!0},cancel:function(t){var e=this,o=config.cancel_url+"/"+t+"/cancel",a={};jAjax({type:"post",url:o,data:a,timeOut:5e3,before:function(){},success:function(t){t&&(t=JSON.parse(t),200==parseInt(t.code)?e.succhandle(t):(e.msg=t.message,e.showAlert=!0,e.close_auto()))},error:function(){}})},todetail:function(t){location.href=config.detail_url+"/"+t.orderId},nextPage:function(){var t=this;if(t.preventRepeatReuqest=!0,t.pager.next>0){var e=config.orderlist_url+"?status="+t.status+"&page="+t.pager.next;e!==t.last_url&&(t.last_url=e,tools.ajaxGet(e,t.nextSucc,t.getBefore))}},category:function(t){var e=this;e.preventRepeatReuqest=!1,e.tab_num=t,e.orderlist={},e.pager={},e.status=t;var o=config.orderlist_url+"?status="+e.status;3==t&&(o+="&comment_status=0"),tools.ajaxGet(o,e.cateSucc,e.getBefore)},subSearch:function(){var t=this;tools.ajaxGet(config.search_url+"?keyword="+t.keywords,t.searchSucc,t.getBefore)},search:function(t){var e=this;e.show_search?(e.placeholder="",1==t&&(e.subSearch(),e.keywords="")):e.placeholder="请输入订单号或者商品名称",e.show_search=!e.show_search},confirm:function(t,e){var o=this;o.msg="您确认要执行此操作？",o.orderId=t,o.callback=e,o.showConfirm=!0},no:function(){this.showConfirm=!1},ok:function(t,e){this.showConfirm=!1,t&&t(e)},searchSucc:function(t){var e=this;e.orderlist=t.data.entries,e.pager=t.data.pager,e.listloading=!1,e.orderlist.length>0?e.nodata=!1:e.nodata=!0},cateSucc:function(t){var e=this;e.orderlist=t.data.entries,e.pager=t.data.pager,e.listloading=!1,e.orderlist.length>0?e.nodata=!1:e.nodata=!0},nextSucc:function(t){var e=this;e.pager=t.data.pager,e.orderlist=t.data.entries.concat(e.orderlist),e.preventRepeatReuqest=!1,e.listloading=!1},succhandle:function(t){var e=this;e.msg=t.message,e.showAlert=!0,t.url?e.close_auto(e.linkto,t.url):e.close_auto()},close:function(){this.showAlert=!1},close_auto:function(t,e){var o=this;setTimeout(function(){o.showAlert=!1,t&&t(e)},1500)},linkto:function(t){t&&(location.href=t)}}}).$mount("#orderlist");