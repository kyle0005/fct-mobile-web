"use strict";Vue.component("pop",{template:"#pop",data:function(){return{positionY:0,timer:null}},props:["msg"],methods:{close:function(){this.$emit("close")}}});var app=new Vue({computed:{},mounted:function(){var e=this;e.loadChargeNum(),e.choose(e.charge_nums[0][Object.keys(e.charge_nums[0])[0]],Object.keys(e.charge_nums[0])[0],0)},data:{showAlert:!1,msg:null,charge:config.charge,charge_nums:[],tab_num:0,isOther:!1,charge_num:0,gift:0,balance:0,discount:config.charge.defaultGift,hasNum:!1},directives:{focus:{inserted:function(e){e.focus()}}},watch:{charge_num:function(e,t){var o=this;o.tab_num!=o.charge_nums.length-1&&(o.charge_num>o.charge.max||o.charge_num<o.charge.min)&&(o.charge_num=t),o.charge_num>0?o.hasNum=!0:o.hasNum=!1,o.gift=(parseFloat(o.charge_num)*parseFloat(o.discount)).toFixed(0),o.balance=(parseFloat(o.charge_num)+parseFloat(o.gift)).toFixed(0)}},methods:{showText:function(e){var t=!1;return 0==Object.keys(e)[0]&&(t=!0),t},loadChargeNum:function(){var e=this,t={0:e.discount};for(var o in config.charge.rules){var n={};config.charge.rules.hasOwnProperty(o)&&(n[o]=config.charge.rules[o],e.charge_nums.push(n))}e.charge_nums.push(t)},choose:function(e,t,o){var n=this;n.tab_num=o,0==parseFloat(t)?(t="",n.isOther=!0,n.discount=config.charge.defaultGift):(n.isOther=!1,n.discount=e),n.charge_num=t},sub:function(){var e=this;jAjax({type:"post",url:config.rechargeUrl,data:{charge_num:e.charge_num},timeOut:5e3,before:function(){console.log("before")},success:function(t){t&&(t=JSON.parse(t),200==parseInt(t.code)?(e.msg=t.message,e.showAlert=!0,e.close_auto(e.linkto,t.url)):(e.msg=t.message,e.showAlert=!0,e.close_auto()))},error:function(){console.log("error")}})},close:function(){this.showAlert=!1},close_auto:function(e,t){var o=this;setTimeout(function(){o.showAlert=!1,e&&e(t)},1500)},linkto:function(e){e&&(location.href=e)}}}).$mount("#recharge");